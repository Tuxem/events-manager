{% extends "base.html" %}
{% block body %}
<h1>Events</h1>
<!-- Link to add a new event, correctly points to the create event function -->
<a href="{{ url_for('web.create_or_edit_event') }}" class="btn btn-primary">Add New Event</a>
<ul>
  {% for event in events %}
  <li>
    <!-- Make event name clickable to edit the event, points to the edit event function -->
    <a href="{{ url_for('web.create_or_edit_event', id=event.id) }}">
      {{ event.date.strftime('%Y-%m-%d') }} - 
      {% for event_band in event.bands %}
        {{ event_band.band.name }}{% if not loop.last %}, {% endif %}
      {% endfor %}
    </a>
    <!-- Confirmation dialog for Delete -->
    <form action="{{ url_for('web.delete_event', id=event.id) }}" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this event?');">
      <input type="submit" value="Delete" class="btn btn-danger">
    </form>
  </li>
  {% endfor %}
</ul>
{% endblock %}
